====================
Installing PyBlosxom
====================

:Author: PyBlosxom Development Team
:Version: $Id$
:Copyright: This document is distributed under the MIT license.

.. contents::



Summary
=======

While there are many ways to install PyBlosxom, the most common one is
to install PyBlosxom as a CGI script for a single user.  This
installation guide will cover that.  For other ways to install
PyBlosxom, refer to the mailing lists and the `web-site`_.

This installation assumes you have some understanding of CGI, Apache
configuration, and know how to manipulate files and directories.  If
this doesn't sound like you, maybe you should get a friend to help out
or ask for help on the pyblosxom-users mailing list.  Details of the
mailing list are on our `web-site`_.

.. _web-site: http://pyblosxom.sourceforge.net/


.. Note::

   A note about upgrading PyBlosxom:
    
   If you are upgrading your version of PyBlosxom, follow the
   instructions here and also read the ``README`` that comes with
   your PyBlosxom tarball for differences between this version and
   the previous versions.  The ``README`` file contains instructions
   on updating your ``config.py`` file, templates, and other parts of
   your PyBlosxom installation which you will have to do by hand.



Pre-requisites for installing PyBlosxom
=======================================

You will need:

* a web-server that runs CGI
* Python version 2.2 or later
* a text editor (notepad, vi, emacs, nano, ...) 

Additionally, if you are running PyBlosxom on Windows, you will 
also need:

* Python for Windows extensions: http://sourceforge.net/projects/pywin32/


Installing PyBlosxom
====================

Installing PyBlosxom should take 5-10 minutes depending on what state
your system is currently in.  The installation consists of seven
steps.  Tweaking, styling, and adding content to your blog is covered
in later chapters of this manual.

Here are the steps you need to do to install PyBlosxom:

1. Download PyBlosxom: Go to http://pyblosxom.sourceforge.net/, click
   on the Download link, and download the latest PyBlosxom ``.tar.gz``
   file.

2. Untar PyBlosxom: Create a working temporary directory, move the
   PyBlosxom tar ball into it, and then untar the tar ball (something
   like ``tar -xzvf pyblosxom.version.tar.gz``).

3. FIXME - 
   Documentation: To create this guide go into the ``./docsrc``
   directory. Run ``make all`` to generate documentation in multiple
   HTML, single HTML and PDF formats. ``make single`` to create a
   single document, ``make multiple`` for multiple HTML pages, ``make
   pdf`` to create a PDF and the single page. Documentation can be
   found in the newly ``./docsrc/manual/`` created directory. ``make
   clean`` to delete the documentation. <ulink
   url="http://openjade.sourceforge.net/">OpenJade</ulink> is
   necessary for the HTML files, <ulink
   url="http://www.htmldoc.org/">HTMLDOC</ulink> for PDF generation.

4. Copy the scripts: Copy the ``pyblosxom.cgi`` and ``config.py`` files
   from the ``web/`` directory into your cgi-bin directory.

5. Create the necessary directories: Create a ``myblog`` directory and
   in that directory create the following subdirectories: ``entries``
   (the datadir), ``flavours`` (the flavourdir) and ``plugins`` (the
   plugin dir).

6. Edit the config.py file: Open your ``config.py`` file up in your
   favorite editor.  Go through and change the values of the
   configuration settings according to the instructions.

   Make sure to set the ``datadir`` property to the datadir directory
   you created, the ``flavourdir`` property to the flavourdir
   directory you created, the ``plugins_dir`` property to the plugins
   directory you created, and the ``codebase`` property to the
   directory you untarred PyBlosxom into.  Also, the ``load_plugins``
   property should be set to the empty list ``[ ]``.

   There are additional description and examples in the appendix of this 
   manual.

   .. Warning::

      A warning about codebase:
  
      If you set the ``codebase`` property, it should be set to the
      directory that holds the ``Pyblosxom/`` directory.
  

7. Verify your installation: Run ``./pyblosxom.cgi`` from the
   commandline.  That will do a first-blush run to make sure things
   are configured correctly and let you know if there are missing
   pieces in your ``config.py`` file.

8. Write your first post and test: Open up the file ``firstpost.txt``
   in the datadir directory in your favorite editor and copy the
   following text into it::


       This is my first post

       <p>
           This is my first post with PyBlosxom.
       </p>


   Open up a web-browser and go to the URL
   ``http://your_server_here/path/to/cgi-bin/pyblosxom.cgi``

   If everything is configured correctly, you should see your first
   post rendered with the default HTML flavour.  If not, you'll either
   see a Python stack trace or a message along the lines of Internal
   Server Error.  In the latter case, check your web-server's error
   logs for more details.


.. Note::

   A note about installing PyBlosxom in Debian:

   At the time of this writing, `Debian GNU/Linux`_ offers Pyblosxom in
   all three of its distributions. Debian *Sarge* offers version
   1.2.1. The Pyblosxom development team doesn't recommend using this
   version. Debian *Etch* and *Sid* offer version 1.3.2.

   .. _Debian GNU/Linux: http://www.debian.org

   To install from a Debian repository, use Synaptic, or from a root term
   ``apt-get install pyblosxom``. This will install all of the necessary
   dependencies, the pyblosxom python libraries and create an
   ``/etc/pyblosxom/`` directory.

   Your ``config.py`` is in the ``/etc/pyblosxom/`` directory and that is
   the file you will edit as per the previous instructions.

   The pyblosxom CGI is installed in Debian's default
   ``/usr/lib/cgi-bin/`` directory.

 

Trouble-shooting
================

We're going to try to break this down a bit into categories.  Bear
with us and keep trying things.  If you have problems and have gone
through this section to no avail, then come talk to us on the
`Pyblosxom users list`_.  Details of the mailing list are located at
our `Contact Us`_ page.

.. _Pyblosxom users list: mailto:pyblosxom-users@lists.sourceforge.net
.. _Contact Us: http://pyblosxom.sourceforge.net/blog/static/contact


Running ./pyblosxom.cgi doesn't work
------------------------------------

First, you should check to see if you have Python installed on your
system.  If not, then please install Python.

If Python is installed on your system, make sure the first line in
``pyblosxom.cgi`` points to your Python interpreter.  If not, fix that
and try running ``./pyblosxom.cgi`` again.

If Python is installed on your system and the first line of
``pyblosxom.cgi`` is correct, then check for permissions issues:
``pyblosxom.cgi`` is a script--so it needs execute permission
in order to function.  If those aren't set, then fix that and try
running ``./pyblosxom.cgi`` again.


I see a HTTP 404 error when I try to bring up my blog
-----------------------------------------------------

When you try to look at your blog and you get a HTTP 404 error, then
you're using the wrong URL.  Are you futzing with ``.htaccess``?  Does
your server allow you to run CGI scripts?  Do other CGI scripts work?
Does the URL you're trying to use to access PyBlosxom look like other
URLs that work on your system?


I see a HTTP 500 error when I try to bring up my blog
-----------------------------------------------------

When you try to look at your blog and you get a HTTP 500 error, check
your server logs.  For Apache, look for the ``error.log`` file in a
place like ``/var/logs/apache`` or ``/var/logs/httpd``.

.. Note::

   Please read the installation chapter:
    
   At this point, running ``./pyblosxom.cgi`` at the command prompt
   should work fine.  If you haven't done that and you're busy
   trouble-shooting, go back to the *installation guide* and make
   sure you did all the steps.


Does the account your web-server runs as have execute access to your
``pyblosxom.cgi`` script?

Is it kicking up a Python stack trace?  If so, uncomment the line in
``pyblosxom.cgi`` (remove the # at the beginning of the line) that
looks like this::

   #import cgitb; cgitb.enable()

Then try looking at your blog again.  That should spit up a huge
pretty traceback that should help iron out the issue for you.  At a
bare minimum, it's useful to people who can help you out.

Do you have plugins loaded?  If you do, try unloading all your plugins
and see if the problem persists.  Sometimes there are issues with plugins
that only show up in certain situations.


I have other issues
-------------------

Try changing the renderer for your blog to the debug renderer.  You
can do this by setting the ``renderer`` property in your ``config.py``
file to ``debug``.  That will show a lot more detail about what things
get set to and may help you figure out your issues.


UGH!  My blog looks UGLY!
-------------------------

Read the chapter on *Flavours and Templates* to help you out.



I hate writing in HTML!
-----------------------

That's ok.  PyBlosxom supports entry parsers which allow you to format
your blog entries in any formatting markup that someone has written
a plugin for.  See the article on "writing entries" for more information.

